p8105_hw2_xh2601
================
Samantha Xinwei Han
2025-09-29

``` r
# load the tidyverse library
library(tidyverse)
```

## Problem 1

#### Step One. Clean the data in pols-month.csv

1.  Use separate() to break up the variable mon into integer variables
    year, month, and day

``` r
# create a dataframe named "pols" for pols-month.csv data
# use 'clean_names()' to clean variable names
# use 'separate()' to break "mon" variable into "year", "month", "day" variables, separated by "-"
# use 'mutate()' to convert character variables into integer variables
pols = 
  read_csv("data/fivethirtyeight_datasets/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day)
  )
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

2.  Replace month number with month name

``` r
# use 'mutate()' to replace month number with month name in "month"
pols = mutate(
  pols,
  month = case_match(
    month,
    1 ~ "January",
    2 ~ "February",
    3 ~ "March",
    4 ~ "April",
    5 ~ "May",
    6 ~ "June",
    7 ~ "July",
    8 ~ "August",
    9 ~ "September",
    10 ~ "October",
    11 ~ "November",
    12 ~ "December"
  )
)
```

3.  Create a president variable taking values gop and dem, and remove
    prez_dem and prez_gop

``` r
# use 'mutate()' to create "president" variable, so that if "prez_gop" is 1, "president" is "gop", and if "prez_dem" is 1, "president" is "dem"
# use 'select()' to remove "prez_dem" and "prez_gop"
# use 'select()' to reorder the dataframe, so that "president" is in the front
pols = pols |> 
  mutate(
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem"
    )
  ) |> 
  select(-prez_dem, -prez_gop) |> 
  select(year, month, day, president, everything())
```

4.  Remove the day variable

``` r
# use 'select()' to remove "day"
pols = select(pols, -day)
```

#### Step Two. Clean the data in snp.csv

``` r
# create a dataframe named "snp" for snp.csv data
# use 'clean_names()' to clean variable names
# use 'separate()' to break "date" variable into "year", "month", "day" variables, separated by "/"
# use 'mutate()' to convert character variables into integer variables
# use 'mutate()' to replace month number with month name in "month"
# use 'mutate()' to replace year number with the full year
# use 'select()' to remove "day"
# use 'select()' to reorder the dataframe, so that "year" and "month" are the leading cols
snp = 
  read_csv("data/fivethirtyeight_datasets/snp.csv") |> 
  janitor::clean_names() |> 
  separate(date, into = c("month", "day", "year"), sep = "/") |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day)
  ) |> 
  mutate(
    month = case_match(
      month,
      1 ~ "January",
      2 ~ "February",
      3 ~ "March",
      4 ~ "April",
      5 ~ "May",
      6 ~ "June",
      7 ~ "July",
      8 ~ "August",
      9 ~ "September",
      10 ~ "October",
      11 ~ "November",
      12 ~ "December"
    )
  ) |> 
  mutate(
    year = if_else(year < 25, year + 2000, year + 1900)
  ) |> 
  select(-day) |> 
  select(year, month, everything())
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

#### Step Three. Tidy the unemployment data

``` r
# create a dataframe named "unemployment" for unemployment.csv data
# use 'clean_names()' to clean variable names
# use 'pivot_longer()' to convert wide to long format
# use 'mutate()' to convert character variable into integer variable in "year"
# use 'mutate()' to replace abbreviated month with month name in "month"
unemployment = 
  read_csv("data/fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "unemployment_percentage"
  ) |> 
  mutate(
    year = as.integer(year)
  ) |> 
  mutate(
    month = case_match(
      month,
      "jan" ~ "January",
      "feb" ~ "February",
      "mar" ~ "March",
      "apr" ~ "April",
      "may" ~ "May",
      "jun" ~ "June",
      "jul" ~ "July",
      "aug" ~ "August",
      "sep" ~ "September",
      "oct" ~ "October",
      "nov" ~ "November",
      "dec" ~ "December"
    )
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

#### Step Four. Join the datasets and interpret

``` r
# use 'left_join()' to merge snp into pols
# use 'left_join()' to merge unemployment into the previous result
pol_econ_df = 
  left_join(pols, snp, by = c("year", "month")) |> 
  left_join(unemployment, by = c("year", "month"))
```

**Interpretation:**

*pols*: contains 822 observations of 9 variables related to the number
of politicians who are democratic or republican at a given time.

- “year” and “month” record the year and month of the count;
- “president” indicate whether the president was republican or
  democratic on the associated year and month (gop = republican, dem =
  democratic);
- “gov_gop”, “sen_gop”, and “rep_gop” record the number of republican
  governors, senators, and representatives, respectively, on the
  associated year and month;
- “gov_dem”, “sen_dem”, and “rep_dem” record the number of democratic
  governors, senators, and representatives, respectively, on the
  associated year and month.

*snp*: contains 787 observations of 3 variables related to Standard &
Poor’s stock market index (S&P), often used as a representative measure
of stock market as a whole, at a given time.

- “year” and “month” record the year and month of the observation;
- “close” records the closing values of the S&P stock index on the
  associated year and month.

*unemployment*: contains 816 observations of 3 variables related to the
percentage of unemployment at a given time.

- “year” and “month” record the year and month of the measurement;
- “unemployment_percentage” records the percentage of unemployment on
  the associated year and month.

*pol_econ_df*: contains 822 observations of 11 variables combining
variables from *pols*, *snp*, and *unemployment* datasets.

- dimension: 822 rows, 11 columns.
- range of years: from January 1947 to June 2015. This range is
  determined by the *pols* dataset, while variables from *snp* and
  *unemployment* are included only for months and years where their data
  overlap with this time period.
- names of key variables:
  - “year” and “month” record the year and month of the observation,
    which are form the common time index across all three datasets.
  - Each observation could include the party of the president, the
    number of Democratic and Republican politicians, S&P index, and
    unemployment rate, provided that valid data are available from the
    three source datasets for that year and month.
- *pol_econ_df* is a monthly dataset spanning January 1947 to June 2015,
  containing political and economic related data. It allows us to learn
  the relations between political power (specifically, the party holding
  presidency and party composition of politicians) and economic
  indicators including stock market performance (S&P index) and the
  unemployment rate.

## Problem 2

#### Step One. Clean the data in pols-month.csv
